var { tag, start, end, render, renderTo, Page } = require ('../src')

const log = console.log.bind (console)
function compose (fn1, fn2, fn3, __) { 
  const fns = arguments
  return function (x) {
    for (var i=fns.length-1; i>=0; i--) x = fns[i](x)
    return x } }


function flush (obj) {
  renderTo (process.stdout, obj)
  //process.exit (205) // TextMate HTML preview
}

var sample = 
  [ tag ('div', { id: 'main', name:'main' })
  , 'Hello, '
  , tag ('em'), 'world', end ('em')
  , '!'
  , end ('div')
  , '\n\n'
  ]

log(render (sample))

renderTo (process.stdout, sample)


////

var sample2 = 
  [ tag ('script', {async:'', '=weird':true})
  , '<asdf>'
  , end ('script')
  , tag ('a')
  , '\n\n'
  ]
  
renderTo (process.stdout, sample2)

var sample3 = 
  [ tag ('textarea')
  , '<script>'
  , end ('textarea')
  , tag ('a')
  , '\n\n'
  ]

renderTo (process.stdout, sample3)


var sample4 = 
  [ tag ('textarea')
  , tag ('textarea')
  , '<script>'
  , end ('textarea')
  , tag ('a')
  , '\n\n'
  ]

renderTo (process.stdout, sample4)


var p = new Page ()
renderTo (process.stdout, p)
